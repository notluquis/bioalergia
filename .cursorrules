# Cursor AI Rules — finanzas-app

## Project Overview
React + Vite + TypeScript frontend with Node + Express + Prisma + **PostgreSQL** backend.
Medical/financial management system for a healthcare clinic.

## Critical Rules

### Database is PostgreSQL (NOT MySQL)
- Use `TO_CHAR()` instead of `DATE_FORMAT()`
- Use `EXTRACT()` for date parts
- Table names follow Prisma `@@map`: `events` (not `google_calendar_events`), `people` (not `person`)

### Styling
- ALWAYS use DaisyUI semantic classes: `bg-base-100`, `text-base-content`, `card`, `btn`
- NEVER use `bg-white`, `text-gray-*`, or hardcoded hex colors
- Use `src/components/ui/Button.tsx` for all buttons

### Code Patterns
- Check existing APIs in `src/features/*/api.ts` before creating new ones
- Use existing hooks from `src/features/*/hooks/` 
- All tabs need `end: true` property to mark active route correctly

### Before Committing
```bash
npm run type-check  # Required - commits fail on type errors
npm run lint        # Required - commits fail on lint errors
npm run build       # Verify build works
```

## Key Files
- `AGENTS.md` — Full documentation for AI agents
- `server/config.ts` — Session (24h), JWT, calendar config
- `prisma/schema.prisma` — Database schema (check `@@map` for table names)
- `src/main.tsx` — App entry + routes

## Common Mistakes to Avoid
1. Using MySQL syntax in raw queries (use PostgreSQL)
2. Using `bg-white` instead of `bg-base-100`
3. Creating duplicate API functions
4. Missing `end: true` on tab items
5. Committing without running type-check

## Documentation Reference
See `AGENTS.md` in project root for complete instructions.
