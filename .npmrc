# Peak Performance & Docker Compatibility
# ----------------------------------------
# Hoist dependencies to avoid symlink / non-standard node_modules layout issues
# in minimal / distroless Docker images, where pnpm's default isolated
# node_modules structure (with symlinks) can break older tooling, COPY rules,
# or runtimes that assume a flat node_modules tree.
#
# Security / isolation tradeoff:
# - shamefully-hoist=true and node-linker=hoisted relax pnpm's strict
#   dependency isolation and can make "phantom" dependencies (not explicitly
#   listed in package.json) available at runtime.
# - All runtime dependencies MUST still be declared in the appropriate
#   package.json files. Do not rely on transitive or undeclared packages.
# - These settings are primarily intended for container builds; if you need
#   stricter isolation locally, override via environment (e.g. PNPM_CONFIG_NODE_LINKER=isolated).
shamefully-hoist=true
node-linker=hoisted

# Optimization for CI/CD
prefer-frozen-lockfile=true
strict-peer-dependencies=false
auto-install-peers=false

# Caching and Fetching
modules-cache-max-age=21600
verify-store-integrity=false
# store-dir=/root/.local/share/pnpm/store (Commented out for local parity)
